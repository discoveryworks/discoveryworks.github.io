<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Discovery Works is a product development studio exploring how humans and computers interact." />
    <title>Discovery Works</title>
    <link rel="stylesheet" href="stylesheets/default.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Funnel+Display:wght@500;700;800&family=Libre+Baskerville:ital@0;1&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  </head>
  <body>
    <!-- Accessibility announcement for color changes -->
    <div aria-live="polite" class="sr-only" id="color-change-announcement"></div>
    <!-- Controls for animations and contrast -->
    <div class="animation-controls">
      <button id="toggle-animations" aria-label="Pause animations">Pause</button>
    </div>
    <div class="contrast-controls">
      <a href="/mono" class="contrast-button" aria-label="Switch to monochrome version">Mono</a>
    </div>
    
    <main role="main">
      <div class="left-column">
        <div class="logo-container">
            <svg
              id="logo"
              width="100%"
              viewBox="0 0 228 116"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              aria-labelledby="logo-title"
              role="img"
            >
              <title id="logo-title">Discovery Works Logo</title>
              <g style="mix-blend-mode: multiply">
                <path
                  class="logo-blue"
                  d="M44.3723 0.481934H0.156067V115.487H44.3723C52.3134 115.487 59.6828 113.898 66.5439 110.752C72.6427 107.956 78.0109 104.27 82.712 99.789L53.3299 1.27639C50.4076 0.799716 47.4216 0.481934 44.3405 0.481934H44.3723Z"
                  fill="#52A7DC"
                />
              </g>
              <g style="mix-blend-mode: multiply">
                <path
                  class="logo-pink"
                  d="M53.1075 0.481934L53.3616 1.27639C57.8722 2.03907 62.2557 3.27841 66.4169 5.21689C73.278 8.36293 79.2815 12.5577 84.3956 17.8011C89.5414 23.0445 93.5755 29.1459 96.5296 36.1053C99.4837 43.0648 100.945 50.3738 100.945 58.0006C100.945 65.6273 99.4837 72.7775 96.5931 79.7369C93.7026 86.6963 89.6685 92.8295 84.5544 98.1047C83.9826 98.7085 83.3473 99.2487 82.7438 99.8207L87.4132 115.519H193.538L227.844 0.513707H53.1075V0.481934Z"
                  fill="#DC6DA5"
                />
              </g>
              <path
                class="logo-yellow"
                d="M96.5932 79.7369C99.4837 72.7774 100.945 65.532 100.945 58.0005C100.945 50.4691 99.4838 43.0648 96.5297 36.1053C93.5756 29.1459 89.5415 23.0445 84.3956 17.8011C79.2498 12.5576 73.278 8.36291 66.4169 5.21686C62.2557 3.31017 57.8722 2.03905 53.3616 1.27637L82.7438 99.7889C83.3473 99.2169 83.9826 98.6767 84.5544 98.0729C89.7002 92.7977 93.7026 86.6645 96.5932 79.7051V79.7369Z"
                fill="#FBE14B"
              />
            </svg>
          </div>
        </div>

        <div class="right-column">
          <div id="introduction">
            <h2 class="question" id="q1">"If you build it, they will come"?</h2>
            <h2 class="bad-answer" id="a1" aria-labelledby="q1 a1">Doesn't work.</h2>

            <h2 class="question" id="q2">"All users think like me"?</h2>
            <h2 class="bad-answer" id="a2" aria-labelledby="q2 a2">Doesn't work.</h2>

            <h2 class="question" id="q3">Discovery?</h2>
            <h2 class="good-answer" id="a3" aria-labelledby="q3 a3">Works.</h2>
          </div>
        </div>
        
        <div id="mission">
          <h3>
            Discovery Works <br />is a product development studio
            <br />exploring how humans and computers interact.
          </h3>
        </div>
    </main>

    <footer role="contentinfo">
      <div class="footer-content">
        <div class="copyright">&copy; Discovery Works</div>
        <div class="social-links">
          <a
            href="https://github.com/discoveryworks"
            aria-label="GitHub"
            class="social-icon"
            rel="noopener noreferrer"
          >
            <i class="fa-brands fa-github" aria-hidden="true"></i>
          </a>
          <a
            href="https://bsky.app/profile/discoveryworks.bsky.social"
            aria-label="Bluesky"
            class="social-icon"
            rel="noopener noreferrer"
          >
            <i class="fa-solid fa-square" aria-hidden="true"></i>
          </a>
        </div>
      </div>
    </footer>

    <script>
      // Timing variables from CSS
      const cssVars = getComputedStyle(document.documentElement);
      const breathingPace = parseFloat(cssVars.getPropertyValue('--pace-calm-human-breathing').trim()) * 1000;
      const gradientRotationSpeed = parseFloat(cssVars.getPropertyValue('--gradient-rotation-speed').trim()) * 1000;
      
      // Color definitions - Core colors
      const colors = {
        pink: '#DC6DA5',
        yellow: '#FBE14B',
        blue: '#52A7DC',
        green: '#A4C88E'
      };
      
      // Color definitions - Tints (lighter versions for backgrounds)
      const tints = {
        pink: '#F5C9DB',  // pink-100
        yellow: '#FCF4A8', // yellow-100
        blue: '#A7D3F0',  // blue-100
        green: '#DCEACF'  // green-100
      };

      // Object keys as an array for random selection
      const colorKeys = Object.keys(colors);
      
      // Function to get a random integer between min and max (inclusive)
      function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1) + min);
      }
      
      // Current gradient angle
      let currentAngle = getRandomInt(0, 360);
      
      // Function to generate a gradient with slowly rotating angle
      function generateGradient(shuffledColors) {
        // Decide on number of stops (2-3)
        const stopCount = getRandomInt(2, 3);
        
        // Generate the stops
        let gradientStops = '';
        for (let i = 0; i < stopCount; i++) {
          const percent = i === 0 ? 0 : i === (stopCount - 1) ? 100 : getRandomInt(30, 70);
          gradientStops += `${tints[shuffledColors[i % shuffledColors.length]]} ${percent}%`;
          if (i < stopCount - 1) {
            gradientStops += ', ';
          }
        }
        
        // Create the gradient with current angle
        return `linear-gradient(${currentAngle}deg, ${gradientStops})`;
      }
      
      // Check for contrast to ensure readability
      function checkColorContrast(currentColors) {
        // Reset all contrast classes
        document.documentElement.classList.remove('yellow-secondary');
        
        // If yellow is assigned to secondary (used for bad-answer)
        if (currentColors[1] === 'yellow') {
          // Add special class to handle yellow contrast
          document.documentElement.classList.add('yellow-secondary');
        }
        
        // Announce color change for screen readers
        const colorChangeAnnouncement = document.getElementById('color-change-announcement');
        if (colorChangeAnnouncement) {
          colorChangeAnnouncement.textContent = "Colors have been updated";
          // Clear after announcement is read
          setTimeout(() => {
            colorChangeAnnouncement.textContent = '';
          }, 1000);
        }
      }

      // Function to randomly assign colors to semantic variables and update the gradient
      function randomizeColors() {
        // Create a copy of the colorKeys array and shuffle it
        const shuffledColors = [...colorKeys].sort(() => 0.5 - Math.random());
        
        // Assign random colors to semantic variables
        document.documentElement.style.setProperty('--color-primary', colors[shuffledColors[0]]);
        document.documentElement.style.setProperty('--color-secondary', colors[shuffledColors[1]]);
        document.documentElement.style.setProperty('--color-accent', colors[shuffledColors[2]]);
        document.documentElement.style.setProperty('--color-success', colors[shuffledColors[3] || shuffledColors[0]]);
        
        // Also change the logo colors to match
        document.querySelector('.logo-blue').setAttribute('fill', colors[shuffledColors[0]]);
        document.querySelector('.logo-pink').setAttribute('fill', colors[shuffledColors[1]]);
        document.querySelector('.logo-yellow').setAttribute('fill', colors[shuffledColors[2]]);
        
        // Check if colors need contrast adjustments
        checkColorContrast(shuffledColors);
        
        // Update background gradient
        document.body.style.backgroundImage = generateGradient(shuffledColors);
      }
      
      // Function to only rotate the gradient angle
      function rotateGradientAngle() {
        // Update the angle by 1 degree
        currentAngle = (currentAngle + 1) % 360;
        
        // Only update the angle part of the gradient
        const currentGradient = document.body.style.backgroundImage;
        if (currentGradient) {
          // Replace just the angle in the gradient
          const newGradient = currentGradient.replace(/\d+deg/, `${currentAngle}deg`);
          document.body.style.backgroundImage = newGradient;
        }
      }
      
      // Add keyboard control to pause animations for people with vestibular disorders
      let animationsPaused = false;
      let colorChangeInterval = null;
      let gradientRotationInterval = null;
      
      function toggleAnimations() {
        animationsPaused = !animationsPaused;
        const toggleButton = document.getElementById('toggle-animations');
        
        if (animationsPaused) {
          // Stop all intervals
          clearInterval(colorChangeInterval);
          clearInterval(gradientRotationInterval);
          
          // Update button text
          if (toggleButton) {
            toggleButton.textContent = "Resume animations";
            toggleButton.setAttribute('aria-label', "Resume animations");
          }
          
          // Announce to screen readers
          const announcement = document.getElementById('color-change-announcement');
          if (announcement) {
            announcement.textContent = "Animations paused";
          }
        } else {
          // Restart intervals
          colorChangeInterval = setInterval(randomizeColors, breathingPace * 4);
          gradientRotationInterval = setInterval(rotateGradientAngle, 100);
          
          // Update button text
          if (toggleButton) {
            toggleButton.textContent = "Pause animations";
            toggleButton.setAttribute('aria-label', "Pause animations");
          }
          
          // Announce to screen readers
          const announcement = document.getElementById('color-change-announcement');
          if (announcement) {
            announcement.textContent = "Animations resumed";
          }
        }
      }
      
      // Run the randomization on page load
      document.addEventListener('DOMContentLoaded', function() {
        // Initial color setup
        randomizeColors();
        
        // Set up the color change interval (based on breathing pace)
        colorChangeInterval = setInterval(randomizeColors, breathingPace * 4); // Four breaths between color changes
        
        // Set up the gradient rotation interval
        gradientRotationInterval = setInterval(rotateGradientAngle, 100); // Rotate slightly every 100ms for smooth rotation
        
        // Add keyboard listener for pause/play (spacebar or 'p')
        document.addEventListener('keydown', function(event) {
          if (event.key === ' ' || event.key === 'p' || event.key === 'P') {
            toggleAnimations();
            event.preventDefault(); // Prevent default actions like scrolling for spacebar
          }
        });
        
        // Add click listener for the pause button
        const toggleButton = document.getElementById('toggle-animations');
        if (toggleButton) {
          toggleButton.addEventListener('click', toggleAnimations);
        }
      });
    </script>
  </body>
</html>